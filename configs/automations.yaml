defaults:
  - templates
  - _self_

# Activity automation configurations
activity:
  _target_: todoist.automations.activity.Activity
  name: Activity Fetching Automation
  nweeks_window_size: 2 # 6 weeks window
  early_stop_after_n_windows: 2 # Stop if 2 consecutive windows yield no new events

# Multiply automation configuration
multiply:
  _target_: todoist.automations.multiplicate.Multiply
  frequency_in_minutes: 0.1

gmail_tasks:
  _target_: todoist.automations.gmail_tasks.GmailTasksAutomation
  name: Gmail Tasks
  frequency_in_minutes: 0.1

# Template automation
template:
  _target_: todoist.automations.template.Template
  task_templates:
    # Development templates
    pr: ${development.pr}
    feature: ${development.feature}
    
    # Academic templates
    conference_people_scan: ${academic.conference_people_scan}
    networking_reachout: ${academic.networking_reachout}
    networking_followup: ${academic.networking_followup}
    talk_attendance: ${academic.talk_attendance}
    conference_paper_scan: ${academic.conference_paper_scan}
    summer_school_project_team: ${academic.summer_school_project_team}
    conference_postmortem: ${academic.conference_postmortem}
    poster_creation: ${academic.poster_creation}
    read_paper: ${academic.read_paper}
    phd_supervisor_scan: ${academic.phd_supervisor_scan}
    
    # Communication templates
    msg: ${communication.msg}
    call: ${communication.call}

llm_breakdown:
  _target_: todoist.automations.llm_breakdown.LLMBreakdown
  frequency_in_minutes: 0.1
  label_prefix: "llm-"
  default_variant: "breakdown"
  max_depth: 3
  max_children: 6
  max_total_tasks: 60
  allow_existing_children: false
  remove_label_after_processing: true
  propagate_labels: true
  max_tasks_per_tick: 1
  max_queue_depth: 1
  auto_queue_children: true
  variants:
    breakdown:
      instruction: "Balanced breakdown with 4-6 top-level tasks."
      queue_depth: 1
    breakdown-lite:
      instruction: "Keep it short and light."
      max_depth: 2
      max_children: 4
      queue_depth: 1
    breakdown-deep:
      instruction: "Provide more detail and intermediate steps."
      max_depth: 2
      max_children: 6
      queue_depth: 2

automations:
  - ${template}
  - ${activity}
  - ${multiply}
  - ${llm_breakdown}
  # - ${gmail_tasks}

hydra:
  searchpath:
    - file://configs
    - file://configs/templates
